---
import DepartmentSection from "@/components/DepartmentSection.astro";
import TextDisplay from "../components/TextDisplay.astro";
import Layout from "../layouts/Layout.astro";
import "../styles/globals.css";
import { getMembers } from "@/lib/utils/members";

import team from "../assets/team.png";
import Footer from "@/components/Footer.astro";

const members = await getMembers();

const boardMembers = members.filter((member) => member.department === "board");
const chassisMembers = members.filter(
  (member) => member.department === "chassis",
);
const aerodynamicsMembers = members.filter(
  (member) => member.department === "aerodynamics",
);
const itMembers = members.filter((member) => member.department === "it");
const powertrainMembers = members.filter(
  (member) => member.department === "powertrain",
);
const graphicsMembers = members.filter(
  (member) => member.department === "graphics",
);
const electronicsMembers = members.filter(
  (member) => member.department === "electronics",
);
const businessAndCostMembers = members.filter(
  (member) => member.department === "business" || member.department === "cost",
);

const metadata = {
  title: "Team â€¢ Apex Corse",
  description: "Meet the team behind Apex Corse",
};
---

<Layout title={metadata.title} description={metadata.description}>
  <TextDisplay text="The Team" image={team.src} />
  <DepartmentSection department="board" title="Board" members={boardMembers} />
  <DepartmentSection
    department="chassis"
    title="Chassis"
    members={chassisMembers}
  />
  <DepartmentSection
    department="aerodynamics"
    title="Aerodynamics"
    members={aerodynamicsMembers}
  />
  <DepartmentSection department="it" title="IT" members={itMembers} />
  <DepartmentSection
    department="powertrain"
    title="Powertrain"
    members={powertrainMembers}
  />
  <DepartmentSection
    department="electronics"
    title="Electronics"
    members={electronicsMembers}
  />
  <DepartmentSection
    department="graphics"
    title="Graphics"
    members={graphicsMembers}
  />
  <DepartmentSection
    department="business"
    title="Business & Cost"
    members={businessAndCostMembers}
  />
  <Footer />
</Layout>
