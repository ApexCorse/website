---
import Footer from "@/components/Footer.astro";
import Header from "@/components/Header.astro";
import "../styles/globals.css";
import Layout from "./Layout.astro";
import type { MarkdownInstance } from "astro";
import { Image } from "astro:assets";

interface Props {
  frontmatter: MarkdownInstance<any>["frontmatter"];
}

const { frontmatter } = Astro.props as Props;

let image: Promise<{ default: ImageMetadata }> | undefined;

if (frontmatter.image) {
  image = import(`../assets/${frontmatter.image}`) as Promise<{
    default: ImageMetadata;
  }>;
}
---

<Layout>
  <Header />
  <article
    class="bg-background prose prose-headings:font-primary prose-headings:text-white prose-headings:font-normal prose-h1:font-bold prose-headings:uppercase prose-strong:text-white text-white-muted prose-img:mx-auto prose-img:max-w-4xl prose-img:w-full prose-img:rounded-2xl min-h-screen max-w-none px-4 py-8 md:px-8 lg:px-16"
  >
    <div class="flex flex-col gap-4">
      {image && <Image src={image} alt={frontmatter.title} />}
      <h1 class="mb-1">{frontmatter.title}</h1>
      <div class="not-prose">
        <p class="text-base text-white">
          {frontmatter.author}
        </p>
        <p class="text-white-muted text-sm">
          {
            new Date(frontmatter.date).toLocaleDateString("en-US", {
              month: "long",
              day: "numeric",
              year: "numeric",
            })
          }
        </p>
      </div>
      <div class="bg-white-muted h-px w-full"></div>
    </div>
    <slot />
  </article>
  <Footer />
</Layout>
